<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Handling, Validation, and Cart</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
    }
    form {
      margin: 20px 0;
    }
    .error {
      color: red;
    }
    .catalog {
      display: flex;
      flex-wrap: wrap;
    }
    .product {
      border: 1px solid #ccc;
      margin: 10px;
      padding: 10px;
      width: 200px;
    }
    .cart {
      margin-top: 20px;
    }
  </style>
</head>
<body>
<h1>Form Handling, Validation, and Cart</h1>

<!-- Task 1: User Form and Validation Combined -->
<h2>Form Handling and Validation</h2>
<form id="userForm">
  <label for="name">Name:</label>
  <input type="text" id="name" name="name" required>
  <br><br>

  <label for="email">Email (HTML5):</label>
  <input type="email" id="email" name="email" required>
  <br><br>

  <label for="password">Password (JS):</label>
  <input type="password" id="password" name="password">
  <span class="error" id="passwordError"></span>
  <br><br>

  <label for="regexInput">Regex Input:</label>
  <input type="text" id="regexInput" name="regexInput">
  <span class="error" id="regexError"></span>
  <br><br>

  <button type="button" onclick="handleFormData()">Submit</button>
</form>

<div id="formOutput"></div>

<script>
  // Handle form data and validation
  function handleFormData() {
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const regexInput = document.getElementById('regexInput').value;

    let valid = true;

    // Password validation
    const passwordError = document.getElementById('passwordError');
    if (password.length < 8) {
      passwordError.textContent = 'Password must be at least 8 characters.';
      valid = false;
    } else {
      passwordError.textContent = '';
    }

    // Regex validation
    const regexError = document.getElementById('regexError');
    const regex = /^[a-zA-Z0-9]+$/; // Alphanumeric only
    if (!regex.test(regexInput)) {
      regexError.textContent = 'Only alphanumeric characters are allowed.';
      valid = false;
    } else {
      regexError.textContent = '';
    }

    if (valid) {
      const output = `
                    Name: ${name}<br>
                    Email: ${email}<br>
                    Password: ${password}<br>
                    Regex Input: ${regexInput}
                `;

      document.getElementById('formOutput').innerHTML = output;
    }
  }
</script>

<!-- Task 1: JSON Catalog and Shopping Cart -->
<h2>Catalog and Shopping Cart</h2>
<div class="catalog" id="catalog"></div>
<div class="cart" id="cart">
  <h3>Shopping Cart</h3>
  <ul id="cartItems"></ul>
  <button onclick="clearCart()">Clear Cart</button>
</div>

<script>
  const catalogData = [
    { id: 1, name: 'Product 1', price: 100 },
    { id: 2, name: 'Product 2', price: 200 },
    { id: 3, name: 'Product 3', price: 300 },
    { id: 4, name: 'Product 4', price: 400 },
    { id: 5, name: 'Product 5', price: 500 },
    { id: 6, name: 'Product 6', price: 600 },
    { id: 7, name: 'Product 7', price: 700 },
    { id: 8, name: 'Product 8', price: 800 },
    { id: 9, name: 'Product 9', price: 900 },
    { id: 10, name: 'Product 10', price: 1000 }
  ];

  const cart = [];

  function displayCatalog() {
    const catalog = document.getElementById('catalog');
    catalogData.forEach(product => {
      const productDiv = document.createElement('div');
      productDiv.className = 'product';
      productDiv.innerHTML = `
                    <h4>${product.name}</h4>
                    <p>Price: $${product.price}</p>
                    <button onclick="addToCart(${product.id})">Add to Cart</button>
                `;
      catalog.appendChild(productDiv);
    });
  }

  function addToCart(productId) {
    const product = catalogData.find(p => p.id === productId);
    cart.push(product);
    updateCart();
  }

  function updateCart() {
    const cartItems = document.getElementById('cartItems');
    cartItems.innerHTML = '';
    cart.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.name} - $${item.price}`;
      cartItems.appendChild(li);
    });
  }

  function clearCart() {
    cart.length = 0;
    updateCart();
  }

  displayCatalog();
</script>

<!-- Task 2: Working with Cookies -->
<h2>Working with Cookies</h2>
<form id="cookieForm" onsubmit="saveToCookies(); return false;">
  <label for="fullName">Full Name:</label>
  <input type="text" id="fullName" name="fullName">
  <br><br>

  <label for="birthDate">Date of Birth:</label>
  <input type="date" id="birthDate" name="birthDate">
  <br><br>

  <label for="hobbies">Hobbies:</label>
  <input type="text" id="hobbies" name="hobbies">
  <br><br>

  <button type="submit">Save to Cookies</button>
  <button type="button" onclick="clearCookies()">Clear Cookies</button>
</form>

<div id="cookieOutput"></div>

<script>
  function saveToCookies() {
    const fullName = document.getElementById('fullName').value;
    const birthDate = document.getElementById('birthDate').value;
    const hobbies = document.getElementById('hobbies').value;

    document.cookie = `fullName=${fullName};path=/;`;
    document.cookie = `birthDate=${birthDate};path=/;`;
    document.cookie = `hobbies=${hobbies};path=/;`;

    displayCookies();
  }

  function displayCookies() {
    const cookies = document.cookie;
    document.getElementById('cookieOutput').textContent = `Cookies: ${cookies}`;
  }

  function clearCookies() {
    document.cookie = "fullName=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    document.cookie = "birthDate=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    document.cookie = "hobbies=;path=/;expires=Thu, 01 Jan 1970 00:00:00 UTC;";
    displayCookies();
  }

  displayCookies();
</script>
</body>
</html>
